<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>MSNotes</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div class="app-shell">
		<header>
			<h1>MSNotes</h1>
			<p>Capture tasks, color-code their intent, drag them between focus lanes, and keep overdue work anchored to the top until it is done. Everything stays on this machine via Local Storage.</p>
			<div id="statistics-bar" class="statistics-bar">
				<div class="stat-item">
					<span class="stat-label">Task Completion Speed:</span>
					<span id="accuracy-stat" class="stat-value">â€”</span>
					<span id="late-tasks-count" class="stat-badge">â€”</span>
				</div>
				<div class="stat-item">
					<span class="stat-label">Avg. Lateness (Week):</span>
					<span id="lateness-stat" class="stat-value">â€”</span>
				</div>
			</div>
			<div class="controls-cluster">
				<section class="filters" aria-label="Color filter controls">
					<button type="button" data-filter="all" class="active">Show all</button>
				</section>
				<section class="sort-controls" aria-label="Sort options">
					<label for="sort-by">Sort by:</label>
					<select id="sort-by">
						<option value="custom">Custom Order</option>
						<option value="priority" selected>Intelligent Ranking</option>
						<option value="dueDate">Due Date</option>
						<option value="created">Date Created</option>
					</select>
				</section>
			</div>
		<details class="json-controls">
			<summary>JSON Import/Export</summary>
			<section class="io-controls" aria-label="Data backup controls">
				<button type="button" id="export-json">Export JSON</button>
				<button type="button" id="import-json">Import JSON</button>
				<button type="button" id="delete-all-tasks" class="danger-btn">Delete All Tasks</button>
				<input type="file" id="import-file" accept="application/json" hidden />
			</section>
			<section class="manual-json" aria-label="Manual JSON transfer">
				<textarea id="manual-json-area" placeholder="Press &quot;Fill export&quot; to copy current tasks or paste JSON here to import."></textarea>
				<div class="manual-actions">
					<button type="button" id="manual-fill">Fill export</button>
					<button type="button" id="manual-copy">Copy</button>
					<button type="button" id="manual-import">Import pasted JSON</button>
				</div>
			</section>
		</details>
			<form id="task-form" novalidate>
				<div class="field">
					<label for="task-title">Task</label>
					<input id="task-title" name="title" type="text" placeholder="Write the note" required />
				</div>
				<div class="field">
					<label for="task-description">Details</label>
					<textarea id="task-description" name="description" placeholder="Optional context"></textarea>
				</div>
				<div class="field">
					<label for="task-due">Completion date</label>
					<div class="form-date-field">
						<input id="task-due" name="due" type="date" />
						<button type="button" id="clear-form-date" class="clear-date-btn" title="Clear date">âœ•</button>
					</div>
				</div>
				<div class="field">
					<label for="task-color">Type</label>
					<select id="task-color" name="color">
						<option value="#94a3b8" selected>General</option>
					</select>
				</div>
				<div class="field">
					<label for="task-priority">Priority</label>
					<select id="task-priority" name="priority">
						<option value="1">ðŸ”´ Critical</option>
						<option value="2">ðŸŸ  High</option>
						<option value="3" selected>ðŸŸ¡ Medium</option>
						<option value="4">ðŸŸ¢ Low</option>
					</select>
				</div>
				<div class="field">
					<label for="task-length">Est. Time</label>
					<input type="text" id="task-length" name="length" placeholder="e.g., 2h 30min or 45" />
				</div>
				<div class="field">
					<label for="task-list">Lane</label>
					<select id="task-list" name="list">
						<option value="immediate">Immediate focus</option>
						<option value="later">Later</option>
						<option value="ideas">Ideas/Long Term</option>
					</select>
				</div>
				<div class="field">
					<label for="repeat-group">Repeat</label>
					<div id="repeat-group" class="repeat-checkboxes">
						<label><input type="checkbox" name="repeat" value="monday"> Mon</label>
						<label><input type="checkbox" name="repeat" value="tuesday"> Tue</label>
						<label><input type="checkbox" name="repeat" value="wednesday"> Wed</label>
						<label><input type="checkbox" name="repeat" value="thursday"> Thu</label>
						<label><input type="checkbox" name="repeat" value="friday"> Fri</label>
						<label><input type="checkbox" name="repeat" value="saturday"> Sat</label>
						<label><input type="checkbox" name="repeat" value="sunday"> Sun</label>
					</div>
				</div>
				<div class="actions">
					<button type="submit">Add task</button>
				</div>
			</form>
		</header>

		<main class="board" aria-live="polite">
			<section class="column" data-status="immediate">
				<header>
					<h2>Immediate Focus</h2>
					<span id="immediate-count">0 tasks</span>
				</header>
				<div class="task-dropzone" data-status="immediate"></div>
			</section>
			<section class="column" data-status="later">
				<header>
					<h2>Later</h2>
					<span id="later-count">0 tasks</span>
				</header>
				<div class="task-dropzone" data-status="later"></div>
			</section>
			<section class="column" data-status="ideas">
				<header>
					<h2>Ideas/Long Term</h2>
					<span id="ideas-count">0 tasks</span>
				</header>
				<div class="task-dropzone" data-status="ideas"></div>
			</section>
		</main>
		<details class="completed-panel">
			<summary>Completed tasks</summary>
			<div id="completed-tasks" class="completed-container"></div>
		</details>
	</div>

	<template id="task-template">
		<article class="task-card" draggable="true">
			<div class="task-top">
				<div class="title-group">
					<span class="color-tag" aria-hidden="true"></span>
					<span class="task-title" contenteditable="true"></span>
				</div>
				<div class="task-actions">
					<label>
						<input type="checkbox" class="task-complete" /> Done
					</label>
					<button type="button" class="copy-task-btn copy-json-btn" title="Copy this task as JSON">Copy</button>
				</div>
			</div>
			<div class="task-compact-info"></div>
			<p class="task-description" contenteditable="true"></p>
			<div class="subtasks-section">
				<div class="subtasks-header">
					<h4>Subtasks</h4>
					<span class="subtasks-progress"></span>
				</div>
				<div class="subtask-add-form">
					<input type="text" class="subtask-input" placeholder="Add a subtask..." />
					<button type="button" class="add-subtask-btn">Add</button>
				</div>
				<div class="subtasks-list"></div>
			</div>
			<div class="task-meta">
				<span class="due-display"></span>
				<span class="priority-display"></span>
				<span class="length-display"></span>
				<span class="repeat-display"></span>
				<div class="task-date-field">
					<label>Date <input type="date" class="task-due" /></label>
					<button type="button" class="clear-date-btn" title="Clear date">âœ•</button>
				</div>
				<label>Type <select class="task-color"></select></label>
				<label>Priority <select class="task-priority">
					<option value="1">ðŸ”´ Critical</option>
					<option value="2">ðŸŸ  High</option>
					<option value="3">ðŸŸ¡ Medium</option>
					<option value="4">ðŸŸ¢ Low</option>
				</select></label>
				<label>Time <input type="text" class="task-length" placeholder="e.g., 1h 30min" /></label>
				<label>Lane <select class="task-lane">
					<option value="immediate">Immediate Focus</option>
					<option value="later">Later</option>
					<option value="ideas">Ideas/Long Term</option>
				</select></label>
				<div class="repeat-edit">
					<span style="font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); margin-right: 8px;">Repeat:</span>
					<div class="repeat-checkboxes">
						<label><input type="checkbox" class="repeat-checkbox" value="monday"> Mon</label>
						<label><input type="checkbox" class="repeat-checkbox" value="tuesday"> Tue</label>
						<label><input type="checkbox" class="repeat-checkbox" value="wednesday"> Wed</label>
						<label><input type="checkbox" class="repeat-checkbox" value="thursday"> Thu</label>
						<label><input type="checkbox" class="repeat-checkbox" value="friday"> Fri</label>
						<label><input type="checkbox" class="repeat-checkbox" value="saturday"> Sat</label>
						<label><input type="checkbox" class="repeat-checkbox" value="sunday"> Sun</label>
					</div>
				</div>
				<button type="button" class="flip-lane">Move lane</button>
				<button type="button" class="delete-task">Delete</button>
			</div>
		</article>
	</template>

	<!-- Completion Time Modal -->
	<div id="completion-modal" class="modal">
		<div class="modal-content">
			<h3>Task Completed! ðŸŽ‰</h3>
			<p>How long did this task actually take?</p>
			<div class="completion-time-input">
				<input type="text" id="actual-time-input" placeholder="e.g., 2h 30m or 150" />
				<div class="estimated-time-hint"></div>
			</div>
			<div class="modal-actions">
				<button type="button" id="skip-time-tracking">Skip</button>
				<button type="button" id="save-actual-time" class="primary">Save</button>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<script src="js/config.js" defer></script>
	<script src="js/storage.js" defer></script>
	<script src="js/utils.js" defer></script>
	<script src="js/taskManager.js" defer></script>
	<script src="js/ui.js" defer></script>
	<script src="js/main.js" defer></script>
</body>
</html>
